fml.define("component/iStorage",[],function(e,o,t){var n=!1,i=!1,s={cookieArr:{},options:{domain:".meilishuo.com",path:"/"},setCookie:function(e,o,t){t=t||{};var n=e+"="+encodeURIComponent(o);if(t.domain||(t.domain=this.options.domain),t.path||(t.path=this.options.path),n+="; domain="+t.domain,t.path&&(n+="; path="+t.path),t.duration){var i=new Date;i.setTime(i.getTime()+1e3*t.duration),n+="; expires="+i.toGMTString()}return t.secure&&(n+="; secure"),document.cookie=n+";"},getCookie:function(e,o){this.cookieArr[e]=this.cookieArr[e]||function(){"string"!=typeof e&&(e=e.toString());var o=window.document.cookie.match("(?:^|;)\\s*"+e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)");return o?decodeURIComponent(o[1]):void 0}();var t=this.cookieArr[e];return o?o(t):t},removeCookie:function(e){return this.setCookie(e,"",{duration:-1})}},r={set:function(e,o,t,n){t?sessionStorage.setItem(e,o):localStorage.setItem(e,o),"function"==typeof n&&n()},get:function(e,o,t){try{t(o?sessionStorage.getItem(e):localStorage.getItem(e))}catch(n){}},remove:function(e,o){o?sessionStorage.removeItem(e):localStorage.removeItem(e)}},a={flash:document.getElementById("storage"),sessionId:"",callback:[],init:function(e){if(e&&(this.sessionId=this.sessionId||s.getCookie("PHPSESSID")),!n&&!i){i=!0;var o=(new Date,document.createElement("div")),t='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="storage"';t+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="1" height="1">',t+='<param name="movie" value="http://i.meilishuo.net/css/images/window/storage1.swf" />',t+='<param name="quality" value="high" />',t+='<param name="allowScriptAccess" value="always" />',t+="</object>",o.innerHTML=t,document.body.appendChild(o),this.flash=document.getElementById("storage")}},detectIE:function(){var e=navigator.userAgent.toLowerCase();if(window.ActiveXObject){var o=e.match(/msie ([\d.]+)/)[1];if(o>=5.5&&o<8)return!0}return!1},set:function(e,o,t,i){function s(e,o,t){if(t){var n=new Date;n=parseInt(n.getTime()/36e5),r.flash.setSessionTime(n),r.flash.setSessionVal(r.sessionId+e,n),r.flash.set(r.sessionId+e,o)}else r.flash.set(e,o)}var r=this;r.init(t),n?(s(e,o,t),"function"==typeof i&&i()):r.callback.push(function(){s(e,o,t),"function"==typeof i&&i()})},get:function(e,o,t){function i(e,o){return o?(s.flash.removeAllSession(),s.flash.get(s.sessionId+e)):s.flash.get(e)}var s=this;s.init(o),n?t(i(e,o)):s.callback.push(function(){t(i(e,o))})},remove:function(e,o){var t=this;if(t.init(o),!n){var t=this;return void window.setTimeout(function(){t.remove(e,o)},100)}o?t.flash.remove(t.sessionId+e):t.flash.remove(e)}},c={set:function(e,o,t,n){t?s.setCookie(e,o):s.setCookie(e,o,{duration:15552e3}),"function"==typeof n&&n()},get:function(e,o,t){t(s.getCookie(e))},remove:function(e,o){s.removeCookie(e)}},u=a.detectIE()?function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return e?a:c}catch(o){return c}}():r;t.exports={isJSReady:function(){return!0},getAllowDomain:function(){var e=e||["www.meilishuo.com","newlab.meilishuo.com","newtest.meilishuo.com","wwwtest.meilishuo.com","cdjdev.meilishuo.com","xhdev.meilishuo.com","rwdev.meilishuo.com","nanodev.meilishuo.com"];return e},flashReadyHandler:function(){n=!0;for(var e=0,o=a.callback.length;e<o;e++)a.callback[e]()},setCookie:function(e,o,t){return s.setCookie(e,o,t)},getCookie:function(e,o){return s.getCookie(e,o)},removeCookie:function(e){return s.removeCookie(e)},setSession:function(e,o,t){return u.set(e,o,!0,t)},getSession:function(e,o){return u.get(e,!0,o)},removeSession:function(e){return u.remove(e,!0)},set:function(e,o,t){return u.set(e,o,!1,t)},get:function(e,o){return u.get(e,!1,o)},remove:function(e){return u.remove(e,!1)}}});;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};fml.define("component/mce",[],function(t,o,n){var e=function(t){return"[object Array]"===Object.prototype.toString.call(t)};o.get=function(t){if(!t)throw Error("config cannot be null!");var o,n,r=t.id,a=e(r),i=!a&&"object"===("undefined"==typeof r?"undefined":_typeof(r)),f=t.type||(a||i?"/multiget/4":"/get/3"),u=t.dataType||"jsonp",p=t.params||{},y=[];if(i){a=!0,o={};for(var c in r)y.push(r[c]),o[r[c]]=c;r=y}return n="ajax"===u?"json":"jsonp",a?p.pids=r.join(","):p.pid=r,$.ajax({url:"//mce.meilishuo.com/"+u+f,dataType:n,data:p}).then(function(t){if(a){if(i){var n={},e=t.data||{};for(var r in o)n[o[r]]=e[r]&&e[r].list||[];return n}return t.data||{}}return t.data&&t.data.list||[]})}});;fml.define("component/waterfall",["common/showLog","component/shareTmp"],function(t,e,i){function n(t){return function(e){return e?e.sort(function(e,i){return t(e,i)||e.left-i.left})[0]:null}}function o(t,e){"string"==typeof e&&(e=e.split(T));try{e&&e.length&&e.forEach(function(e){t=t[e]})}catch(i){Q("数据结构错误")}finally{return t}}function a(t,e){var i,n,o=e.helpers,a={};if(t&&t.length){for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);n=s,n.call(this,t,e,a),e.onLayoutFinished.call(this,e),e.useOptimise&&(e.hasMoved=!0,this.resetCurTop(),p.triggerHandler(e.touchMoveEventName))}}function r(t){return o(t,this._config._dataName)||[]}function c(t){if(p.height()-_-t<I)return!0}function s(t,e,i){var n,o,a,r,c,s,l,f=this.$el,u=e.tmpl,m=e.colWidth,d=e.useOptimise,p=e.colGapT,g=e.data.frame,_=e.isEqualHeight,v=e._boxHeight,y="",T=null,E=this._cols,L=this._colsHistory,F=L[g],w=this._boxes,k=[],H=0;if(F?E=F.map(function(t){return{min:t.min,max:t.min,left:t.left,frame:g}}):F=E.map(function(t){return{min:t.max,max:t.max,left:t.left,frame:g}}),t.forEach(function(t,n){i.v=t,i.index=n,i.totalIndex=e._totalIndex++,y+=h(u,i)}),f.append(n=x.html(y).children()),o=n.length,!y||!o)return Q("没有获取到任何新的 DOM 节点, 请检查模板中是否正确处理了数据");if(n.each(function(t,i){var n,a;i.style.width=m+"px",_?(v||(v=e._boxHeight=i.offsetHeight),n=v):n=i.offsetHeight,T=V(E),V(F),a=T.max+"px",k.push({left:T.left,relativeTopStyle:a,top:T.max,width:m,height:n,index:t,el:i,boxLen:o,frame:g,state:d?e.isFirstFrame?G:b:G}),T.max+=n+p}),e.isFirstFrame=!1,L[g]||(L[g]=E.map(function(t,e){return{min:F[e].max,max:t.max,left:F[e].left,frame:g}})),k.forEach(function(t){var e=t.el;e.style.top=t.relativeTopStyle,e.style.left=t.left+"px",t.baseClass=e.className+=" waterfall-frame-"+g+" "+N,e.className+=" "+t.state}),s=k[0].top,e.isBiWaterfall){if(a=w.length){for(;H<a;){if(l=w[H],l.frame>g){c=H;break}H+=l.boxLen}c="undefined"==typeof c?a:c}else c=0;w.splice.apply(w,[c,0].concat(k))}else!w.length||w[w.length-1].top<=s?this._boxes=w.concat(k):this._boxes=k.concat(w);r=q(E).max,(!this._curTop||r>this._curTop)&&this.$el.height(this._curTop=r),this._cols=E.map(function(t,e){var i=this[e];return{min:t.min<i.min?t.min:i.min,max:t.max>i.max?t.max:i.max,left:t.left,frame:g}},this._cols)}function l(t){return t.checkTimes=1,function e(){setTimeout(function(){t.checkTimes++<j&&(t.initTopOffset=t.$el.offset().top,e())},B*t.checkTimes)}}function f(t){var e,i,n,o=t.colGap,a=4;if(o!==o)return console.error(o+" is not a valid number.");if("number"==typeof o)t.colGapT=t.colGapR=t.colGapB=t.colGapL=o;else{if(e=String(o).split(" "),i=e.length,0==i||i>4)return console.error(o+"'s format is not right.");for(;a--;)if(n=e[a],void 0!==n){if(isNaN(n=+n))return console.error(o+" contains invalid number.");e[a]=n}switch(i){case 1:t.colGapT=t.colGapR=t.colGapB=t.colGapL=e[0];break;case 2:t.colGapT=t.colGapB=e[0],t.colGapR=t.colGapL=e[1];break;case 3:t.colGapT=e[0],t.colGapR=t.colGapL=e[1],t.colGapB=e[2];break;case 4:t.colGapT=e[0],t.colGapR=e[1],t.colGapB=e[2],t.colGapL=e[3]}}}function u(t){this._config=t,this._currentAjax=null,this._id=v++,this._boxes=[],this._frames={loaded:{},cur:0,max:0,min:0},this.init()}t("common/showLog");var h=t("component/shareTmp"),m=document,d=window,p=$(m),g=$(d),_=g.height(),x=$("<div></div>"),v=1,y=!1,T=".",E="down",L="up",F=!1,w=!0,G="waterfall-optimise-show",b="waterfall-optimise-hide",k=function(){return w},H="waterfall-container",N="waterfall-box",C="NORMAL",O="REVERSE",R="$$AddExtraStyle",S={NORMAL:C,REVERSE:O,SHOW:G,HIDE:b,FORCE_CHECK:"waterfall-force-check",EVENT_CLEAR_BACKUP:"waterfall-clear-backup"},I=_/2,D="scroll.waterfall",A="touchmove.waterfall",M="touchend.waterfall",B=1e3,j=6,P=0,W={el:".goods-wall",tmpl:"posterWall",type:"get",dataType:"json",data:{offset:0,frame:0,trace:0,limit:10,endId:0},dataName:"tInfo",layoutDirection:C,colGap:8,hasSideGap:!1,isEqualHeight:!1,canFetch:c,dataHandler:a,dataFilter:r,onBeforeFetch:k,onFetchStart:k,onFetchFinished:k,onFetchSuccess:k,onFetchError:k,onLayoutFinished:k,onDataEmpty:k,optimise:null},V=n(function(t,e){return t.max-e.max}),q=n(function(t,e){return e.max-t.max}),K=n(function(t,e){return e.min-t.min}),U=[],z=0,J=0,Q=function(){return d.console?function(t){console.log(t)}:k}();!function(){if(!d[R]){d[R]=!0;var t=$('<style id="waterfall-optimise-style">.'+G+"{display:block;}."+b+"{display:none;}."+H+"{position:relative;}."+N+"{position:absolute;}</style>").appendTo("head");try{t.append(m.createTextNode(""))}catch(e){}}}(),u.prototype={constructor:u,init:function(){var t,e,i,n,o,a,r=this._config,c=r.colNum,s=r.hasSideGap,u=0,h=0,m=0;if(n=this.$el=r.$el=$(r.el),1!==n.length)throw Error("el 参数指定的 DOM 元素"+(n.length?"存在多个":"不存在")+", 请仔细检查 el 值。");if(n.addClass(H),this._cols=o=[],this._colsHistory=[],r.initTopOffset=n.offset().top,r.isFirstFrame=!0,l(r)(),f(r),t=r.colGapL,e=r.colGapR,i=e,s&&(h=2*t),!c||c<=0)throw Error("请传入 colNum");for(a=r.colWidth=Math.floor((n.width()-h-(c-1)*i)/c);u<c;u++)0==u?m=s?t:0:m+=a+i,o.push({min:0,max:0,left:m,frame:0});(r.useOptimise=!!r.optimiseFn)&&(this.bindTouchmoveEvent(),r.optimiseFn.initRange(c))},bindTouchmoveEvent:function(){var t,e,i,n=this,o=n._config,a="."+n._id;t=o.touchMoveEventName=A+a,e=o.touchEndEventName=M+a,p.on(t,function(){o.hasMoved=!0,p.triggerHandler(e)}).on(e,function(){!n._isLock&&o.hasMoved&&o.optimiseFn.optimise(n._boxes,g.scrollTop()-o.initTopOffset),o.hasMoved=!1}),g.on(D,function(){clearTimeout(i),i=setTimeout(function(){o.optimiseFn.optimise(n._boxes,g.scrollTop()-o.initTopOffset)},30)})},fetch:function(t){function e(t,e){a.onFetchFinished.call(o,t,e),o._isLoading=!1}function i(t){var e=o._frames,i=r.frame,n=t;a.rawData=n,t=a.dataFilter.call(o,t),o._isLock||t&&t.length||(o.lock(),a.onDataEmpty.call(o,a)),!o._isLock&&n&&n.data&&n.data.endId&&(n.data.endId===-1?(o.lock(),a.onDataEmpty.call(o,a)):r.endId=n.data.endId),a.onFetchSuccess.call(o,t,a),a.dataHandler.call(o,t,a),e.loaded[r.frame]=1,e.max<i&&(e.max=i),e.min>i&&(e.min=i),a.layoutDirection==C?r.frame++:r.frame--,r.trace=t?t.trace||0:0}function n(t,e,i){o._isLoading=!1,a.onFetchError.call(o,i,e)}var o=this,a=o._config,r=a.data;if(!o._isLoading)return o._isLoading=!0,a.onBeforeFetch.call(o,a)===F?void(o._isLoading=!1):(o._config.onFetchStart.call(o,a),this.isFrameLoaded(a.data.frame)?void(o._isLoading=!1):t?void setTimeout(function(){e(null,200),i(t)},0):void(this._currentAjax=$.ajax({type:a.type,dataType:a.dataType,data:r,url:a.url,success:i,error:n,complete:e})))},start:function(t){return this.fetch(t),this},lock:function(){return this._isLock=!0,this},isLoading:function(){return this._isLoading},getColsInfo:function(){return $.extend(!0,[],this._cols)},getColsHistoryInfo:function(){return $.extend(!0,[],this._colsHistory)},setColsHistoryInfo:function(t){return this._colsHistory=$.extend(!0,[],t),this},setColsInfo:function(t){return t&&t.length&&(this._cols=$.extend(!0,[],t)),this},getParam:function(t){return this._config[t]},updateParam:function(t,e){return this._config[t]=e,this},increaseDataParam:function(t){var e=this._config.data,i=+e[t];isNaN(i)?e[t]=0:e[t]=i+1},getDataByPath:o,updateLayoutDirection:function(t){if(!(t in S))throw Error(t+" is not a valid direction.");return this._config.layoutDirection=t,this},findLowestCol:function(){return K(this._cols)},findHighestCol:function(){return q(this._cols)},isFrameLoaded:function(t){return!!this._frames.loaded[t]},getCurrentFrame:function(){return this._config.data.frame},unlock:function(){return this._isLock=!1,this},destroy:function(){for(var t=z;t--;)U[t]._id===this._id&&(this._currentAjax&&(this._currentAjax.abort(),this._currentAjax=null),U.splice(t,1),z--)},resetCurTop:function(){return this._boxes._curTop=-9999,this},triggerScroll:function(t){return g.triggerHandler(D,[t||E]),this}},g.on(D,function(t,e){var i,n,o;z&&(n=g.scrollTop(),n||y?y=!1:(y=!0,clearTimeout(P),P=setTimeout(function(){o=!0,g.trigger(D)},10)),i=e==E||e!=L&&n>=J,J=n,U.forEach(function(t){t._isLock||t._config.canFetch.call(t,n,i)===w&&(t.fetch(),o&&t.resetCurTop())}))}),e.CONS=S,e.init=function(t){var e,i,n,o,a;if(t=$.extend(!0,{_totalIndex:0},W,t),"string"==typeof t.dataName&&(t._dataName=t.dataName.split(".")),i=t.plugins){if(Array.isArray(i)&&(o=i.some(function(t,e){return t.takeOver&&(a=e,1)})))return n=t.plugins.splice(a,1)[0],n.init(t);if(i.takeOver)return delete t.plugins,i.init(t)}return U.push(e=new u(t)),z++,i&&i.forEach(function(t){t.init(e)}),e}});;fml.define("component/dialog",[],function(i,o,d){d.exports={meiliDialog:function(i){var o={maskId:"maskLayer",dialogId:"dialogLayer",dialogTitle:"标题",dialogContent:"",showHeader:!0,dialogHeight:null,isOverflow:!0,isMaskLayer:!0,onClose:function(){},onStart:function(){}},d=$.browser.msie,e=$.extend({},o,i),n=function(){$("#"+e.maskId).remove(),$("#"+e.dialogId).remove(),$(document).bind("keyup",function(i){27==i.keyCode&&c()}),1==e.isMaskLayer&&t(),s(),e.onStart(e)},t=function(){var i=$('<div id="'+e.maskId+'" class="'+e.maskId+'"></div>');$("body").append(i);var o=$(document).width(),d=$(document).height();e.isOverflow?i.css({width:o+20,height:d}):(i.css({width:o,height:d}),$(window).bind("scroll",function(){o=$(document).width(),d=$(document).height(),i.css({width:o,height:d})}))},s=function(){var i="";e.showHeader&&(i='<div id="dialogTitle"><span class="closeDialog close_z"></span><span id="dialogTitleText">'+e.dialogTitle+"</span></div>");var o=$('<div id="'+e.dialogId+'" >'+i+'<div id="dialogContent" ></div></div>');$("body").append(o),$("#dialogContent").append(e.dialogContent).append('<div class="clear_f"></div>'),a(),l(),$(".closeDialog").click(function(){c()})},a=function(){var i=$("#"+e.dialogId),o=parseInt(i.css("padding-top"));if("fixed"==i.css("position")){var d=($(window).height()-i.height())/4-o,n=($(window).width()-i.width())/2-o;i.css({top:d,left:n})}else{var d=$(document).scrollTop()+($(window).height()-i.height())/3-o,n=$(document).scrollLeft()+($(window).width()-i.width())/2-o;d<0?d=20:d,i.css({top:d,left:n})}},l=function(){e.isOverflow?($("body").css("overflow","hidden"),d&&$("html").css("overflow","visible")):d?$(window).bind("scroll",function(){a($("#"+e.dialogId))}):$("#"+e.dialogId).css({position:"fixed"})},c=function(){$("."+e.maskId).remove(),$("#"+e.dialogId).remove(),$("body").css("overflow","auto"),d&&$("html").css({overflow:"auto","overflow-x":"hidden"}),e.onClose(e)};return n(),c}}});;fml.define("component/shareTmp",["core/etic"],function(e,c,t){var r=e("core/etic");t.exports=function(e,c){c=c||Object;try{var t=r(e,c)}catch(n){fml.debug(n)}return t}});;fml.define("component/lazyloadPic",["component/compressImg"],function(t,o,a){function e(){p&&f&&(clearTimeout(g),g=setTimeout(function(){var t=c.scrollTop();if(1===f)u[0].check(t);else for(var o=0;o<f;o++)u[o].check(t)},v))}function n(t){m[t]?m[t]++:m[t]=1}function r(t,o){this.init(t),o||(u.push(this),f+=1)}var i=t("component/compressImg"),l=window,s=document,c=$(l),d=c.height(),h=c.width(),p=!1,u=[],f=0,m={},g=-1,y=!0,v=20,z=5,T="lazyloaderover",w="lazyloadering",I="lazyload-placeholder",k="lazyload-img-start",C="lazyload-img-end",S="no-cdn-compress",b="resize",_="scroll.lazyload",A={bg:function(t,o){var a=new Image,e=this.opt,r=e.useAnimate,i=e.el;t.data(T,1).data(w,0),r&&t.addClass(k),i==="."+I&&t.removeClass(I),a.onload=a.onerror=function(r){r=r||window.event,a=null,"error"===r.type?(t.data(T,0),n(o)):t.css({"background-image":"url("+o+")","background-size":e.bgSize}).addClass(C)},m[o]>z?a=null:a.src=o},img:function F(t,o){var F=new Image,a=this.opt.el;F.title=t.attr("title"),F.alt=t.attr("alt"),F.onerror=function(){t.data(T,0),n(o)},(m[o]||0)<z&&(F.src=o,t.append(F)),t.data(T,1).data(w,0),a==="."+I&&t.removeClass(I)}};i.ready(function(){p=!0}),c.on(_,e).on(b,function(){d=c.height(),h=c.width()});var x={el:"."+I,attr:"src",auto:!0,stepX:40,stepY:40,loadStyle:"bg",bgSize:"cover",useAnimate:!0,root:""};r.prototype={constructor:r,init:function(t){if(this.opt=t=$.extend({},x,t),this._loader=A[t.loadStyle],!this._loader)throw Error('Do not support loadStyle:"'+t.loadStyle+'"');if(t.container&&$(t.container).on(_,e),t.root){var o=$(t.root);1==o.length&&(t.$root=o)}y&&(y=!1,requestAnimationFrame(function(){c.triggerHandler(_)}))},check:function(t){var o=this;requestAnimationFrame(function(){o._innerCheck(t)})},_innerCheck:function(t){if(p){var o=this.opt,a=o.el,e=o.stepX,n=o.stepY,r=o.$root,i=0,l=0,u=h,f=d,m=0;if(t||(t=c.scrollTop(),this.$$scrollTop=0),r){var g=r.offset(),y=r.width();i=g.left,u=Math.min(g.left+y,u)}for(this.$$scrollTop&&(this.$$scrollTop>t?f=Math.min(f,this.$$scrollTop-t):m=Math.max(m,f-(t-this.$$scrollTop))),this.$$scrollTop=t;i<=u;i+=e)for(l=m;l<=f;l+=n){var v,z=s.elementFromPoint(i,l);z&&(z.$$lazyloadImgType||(z.$$lazyloadImgType=1,v=$(z),1!=v.data(w)&&1!=v.data(T)?v.is(a)&&(v.data(w,1),this.load(v)):z.$$lazyloadImgType=2))}}},load:function(t){var o=this;t.hasClass(S)?this._loader(t,t.data(this.opt.attr)):i.ready(function(){o._loader(t,i.parseImgSrc(t.data(o.opt.attr),t))})},destroy:function(){var t=u.indexOf(this);t!==-1&&(u.splice(t,1),f--)}},o.init=function(t){return new r(t)},o.load=function(t,o){var a,e=$(t),n=new r(o,(!0)),i=n.opt.el;a=e.is(i)?e:e.find(n.opt.el),a.each(function(t,o){n.load($(o))})}});;fml.define("component/banner",[],function(e,i,n){!function(e){function i(e,i){var n=this;n.wrap=e,n.ul=n.wrap.find(i.ul),n.li=n.ul.find(i.li),n.len=n.li.length,n.liWidth=n.li.outerWidth(!0),n.liHeight=n.li.outerHeight(!0),n.numBox=n.wrap.find(i.numBox),n.prev=n.wrap.find(i.prev),n.next=n.wrap.find(i.next),n.isAuto=i.isAuto,n.lazyLoad=i.lazyLoad,n.imgSrc=i.imgSrc,n.displayNum=i.displayNum,n.cur=i.cur,n.evt=i.evt,n.effect=i.effect,n.speed=i.speed,n.autoTime=i.autoTime,n.index=i.index,n.numBoxB=null,n.timer=null,n.direction=null,n.step=null,n.dbclicks=!1,n.moveObj={},n.moveObj2={},n.prevIndex=0,n.init()}i.prototype={init:function(){var e=this;e.config(),e.autoPlay(),e.bind()},config:function(){var e=this;if(e.speed=e.speed>=e.autoTime?e.autoTime-100:e.speed,e.index<=0?e.index=0:e.index>=e.len&&(e.index=e.len-1),e.displayNum){e.numBox.empty();for(var i=0;i<e.len;i++)e.numBox.append("<b>"+(i+1)+"</b>")}if(e.numBoxB=e.numBox.children(),e.numBoxB.eq(e.index).addClass(e.cur),e.lazyLoad)for(var n=0;n<e.len;n++)e.li.eq(n).append("<div class='loading-cover'></div>");switch(e.lazyLoad&&e.loadImg(e.index),e.effect){case 0:e.li.hide().eq(e.index).show();break;case 1:e.direction="left",e.step=e.liWidth;break;case 2:e.direction="top",e.step=e.liHeight}0!=e.effect&&e.li.css(e.direction,e.step).eq(e.index).css(e.direction,0).addClass("prevIndexLi"),e.moveObj[e.direction]=0},move:function(){var e=this;if(!e.dbclicks)switch(e.prevIndex=e.wrap.find(".prevIndexLi").index(),0==arguments[0]?(e.index<e.len-1?e.index++:e.index=0,0!=e.effect&&(e.moveObj2[e.direction]=-e.step,e.li.eq(e.index).css(e.direction,e.step))):1==arguments[0]?(e.index<=0?e.index=e.len-1:e.index--,0!=e.effect&&(e.moveObj2[e.direction]=e.step,e.li.eq(e.index).css(e.direction,-e.step))):e.prevIndex<e.index?(e.moveObj2[e.direction]=-e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,e.step)):(e.moveObj2[e.direction]=e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,-e.step)),e.li.removeClass("prevIndexLi").eq(e.index).addClass("prevIndexLi"),e.effect){case 0:e.li.stop(!0,!0).fadeOut(e.speed).eq(e.index).fadeIn(e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur);break;case 1:case 2:e.li.eq(e.prevIndex).stop(!0,!0).animate(e.moveObj2,e.speed),e.li.eq(e.index).stop(!0,!0).animate(e.moveObj,e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur),e.index==e.len&&e.numBoxB.removeClass(e.cur).eq(0).addClass(e.cur)}},loadImg:function(e,i){var n=this;if(n.lazyLoad){var t=n.li.eq(e).find("img");if(t.attr(n.imgSrc)){var o=new Image;o.src=t.attr(n.imgSrc),o.onload=function(){t.attr("src",o.src),t.removeAttr(n.imgSrc),n.li.eq(e).find(".loading-cover").remove(),i&&"function"==typeof i&&i()}}}},autoPlay:function(){var e=this;clearInterval(e.timer),e.isAuto&&(e.timer=setInterval(function(){e.move(0)},e.autoTime))},hoverStop:function(e){var i=this;e.hover(function(){clearInterval(i.timer)},function(){i.autoPlay()})},bind:function(){var i=this;if(i.hoverStop(i.li),0==i.evt){i.prev.hide(),i.next.hide();var n;i.numBoxB.hover(function(){clearInterval(i.timer),e(this).hasClass(i.cur)||(i.index=i.numBoxB.index(this),n=setTimeout(function(){i.move()},200))},function(){clearTimeout(n),i.autoPlay()})}else 1==i.evt&&(i.hoverStop(i.numBoxB),i.hoverStop(i.prev),i.hoverStop(i.next),i.numBoxB.click(function(){e(this).hasClass(i.cur)||(i.index=i.numBoxB.index(this),i.move())}),i.prev.click(function(){i.move(1),i.dbclicks=!0}),i.next.click(function(){i.move(0),i.dbclicks=!0}))}},e.fn.imageSlide=function(n){var t=e.extend({},e.fn.imageSlide.defaults,n);this.each(function(){new i(e(this),t)})},e.fn.imageSlide.defaults={index:0,ul:"ul",li:"li",numBox:".num",prev:".prev",next:".next",cur:"cur",isAuto:!0,lazyLoad:!1,imgSrc:"data-src",displayNum:!0,evt:1,effect:1,speed:500,autoTime:5e3}}(jQuery)});;fml.define("component/compressImg",[],function(x,e,t){function i(x){var e=x.match(/(\d+)x(\d+).([a-zA-Z0-9]*)$/);return e&&e.length>0&&e[1]&&e[2]&&e[3]?{w:e[1],h:e[2],ext:e[3]}:null}function n(x){if(!x||x.indexOf(".webp")>0||x.indexOf(".gif")>0||x.indexOf(".jpg")<0&&x.indexOf(".png")<0||x.indexOf(".jpg_")>0||x.indexOf(".png_")>0)return x;if(x){var e=x.match(/\d+x\d+.[a-zA-Z0-9]*!/g);if(e&&e.length>0&&e.length<2){var t=x.match(/\.([a-zA-Z0-9]+)$/);if(t&&t.length)return x+"_999x999.v1c0.50"+t[0]}}return x}function r(x,e,t){var i=e.attr("suffix-model"),n="",r="."+x._imgQuality+".";switch("no"===e.attr("add-quality")&&(r="."),i){case"add_code":n=$.trim(e.attr("suffix-code"));break;case"orig_narrow":d.devicePixelRatio<2&&(n="50000x50000.v1c7E");break;case"goods_dpr":n=f(x,e);break;default:return t}if(e.attr("suffix-model","end"),!t||!n||t.indexOf(".webp")>0||t.indexOf(".gif")>0)return t;if(n="_"+n,t.indexOf(".jpg")<0&&t.indexOf(".png")<0)return t;if(t.indexOf(".jpg_")>0||t.indexOf(".png_")>0)return t;var a="",g=t.split(".");if("jpg"==g[g.length-1])a="jpg";else{if("png"!=g[g.length-1])return t;a="png"}return t+n+r+a}function a(x,e){var t="_999x999.v1c0.",i=x._bodyWidth,n="."+x._imgQuality+".";if(0<i&&i<=375?t="_375x999.v1c7E"+n:375<i&&i<=750?t="_750x999.v1c7E"+n:750<i&&i<=1125&&(t="_1125x9999.v1c7E"+n),!e||e.indexOf(".webp")>0||e.indexOf(".gif")>0)return e;if(e.indexOf(".jpg")<0&&e.indexOf(".png")<0)return e;var r="",a=e.split(".");if("jpg"==a[a.length-1])r="jpg";else{if("png"!=a[a.length-1])return e;r="png"}return e.indexOf(".png_")<0&&e.indexOf(".jpg_")<0&&e.indexOf("."+r)==e.length-4&&(e+=t+r),g&&e.indexOf(".jpg_")>0&&(a=e.split("."),"jpg"==a[a.length-1])?(a[a.length-1]="webp",a.join(".")):e}function f(x,e){var t="",i=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":t=e.attr("suffix-ratio");break;default:t=x._dprDefRatio,i=".v1c96"}var n=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*x._dpr;(!n||n<0||n>x._dprDefMaxWidth)&&(n=x._dprDefMaxWidth);for(var r=0;r<l.length;r++){var a=l[r];if(n<=a||a==x._dprDefMaxWidth)return s[a][t]+i}return!1}var d=window,g=!1,o=!1,u=[],c=d.devicePixelRatio>=1?d.devicePixelRatio:1,p={_imgQuality:70,_dpr:c,_bodyWidth:d.innerWidth*c,_dprDefMaxWidth:640,_dprDefRatio:"999"},l=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],s={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},h="js:is-support-webp";!function(){var x,e=function(){o=!0,u.forEach(function(x){x&&x()})};try{x=localStorage.getItem(h)}catch(t){fml.debug("获取 storage_key 失败")}if("string"==typeof x)return g="true"===x,void e();var i=new Image;i.onload=i.onerror=function(x){g="load"===x.type&&1===i.width;try{localStorage.setItem(h,g)}catch(x){fml.debug("设置 storage_key 失败")}e()},i.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}(),e.parseImgSrc=function(x,e){if(!x)return"about:blank";var t=i(x);return x.indexOf("mogucdn")===-1?x:(x=r(p,e,x),t&&t.w>750&&(x=n(x)),a(p,x))},e.ready=function(x){x&&(o?x():u.push(x))}});;fml.define("core/etic",[],function(e,n,t){function c(e,n,t){if(t&&checkTemplate(e,n),!o[e]){var c=document.getElementById(e).innerHTML;c=c.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join(";p.push('").split("\r").join("\\'");try{o[e]=new Function("","var p=[];p.push('"+c+"');return p.join('');")}catch(r){if(console){console.log(r);var l=c.replace(/^[ ]*\'\)|p.push\(\'[ ]*\'\)|p.push\(\'/g,"").replace(/^[ ]*;|;[ ]*$/g,"");console.log(r.message+"   :   "+l);var p=document.createElement("script");p.innerHTML=l;try{new Function("",l)}catch(r){}}}}var i=o[e];if(!n)return i;try{return i.apply(n)}catch(r){console&&(console.log(r),console.log(n))}}var o={};t.exports=c});;fml.define("common/showLog",[],function(t,n,e){function s(t){return"none"!=t.css("display")&&"hidden"!=t.css("visibility")&&0!=t.css("opacity")&&t.width()&&(t.height()||t.innerHeight&&t.innerHeight())}function a(t){var n=t.offset().top,e=t.height()||t.innerHeight&&t.innerHeight(),a=t.offset().left,i=t.width(),l=$(window).scrollTop(),o=$(window).scrollLeft(),h=$(window).width(),r=$(window).height(),d=n>=l&&n<l+r,g=n+e>l&&n+e<=l+r,c=n<l&&n+e>l+r,u=a>=o&&a<o+h,f=a+i>o&&a+i<=o+h,w=a<o&&a+i>o+h;return s(t)&&(d||g||c)&&(u||f||w)}function i(){if(y.length||H.length||A.length||b.length||_){var t=function(){H&&H.length?(j("0x00000000",{acms:H,indexs:p,type:5}),p=[],H=[]):A&&A.length?(j("0x00000000",{acms:A,indexs:C,type:5}),C=[],A=[]):b&&b.length?(j("70500",{acms:b,indexs:x,iids:L,type:4}),L=[],x=[],b=[]):_?(j(v||70500,_),_=null,v=null):y&&y.length&&(j(v||70500,{acms:y,iids:L,indexs:T}),y=[],L=[],T=[],v=null)};t()}l=!0,window.setTimeout(function(){y.length||H.length||A.length||b.length||_?i():l=!1},1e3)}var l=!1,o="rec-show-log",h="module_row",r="cube-acm-node",d="has-log-mod",g="show-log-item",c="log-custom",u="waiting-log",f="data-log-content",w="data-log-iid",m="data-log-index",v=($("."+o),null),p=[],C=[],x=[],y=[],_=null,H=[],A=[],b=[],L=[],T=[],j=function(t,n){var e=window&&window.logger&&window.logger.log;e&&e(t,n)},k=function(t){var n=t.attr(f),e=n.split(";");$(e).each(function(t,n){var e=n.split("="),s=e[0];s&&(_=_||{},_[s]=_[s]||[],_[s].push(n.replace(s+"=","")))})},q=function(){$("."+h).each(function(t,n){var e=$(n),s=e.attr("data-acm")||"",i=s.split(".");if(s&&a(e)){var l=e.find("."+r+",.anchor"),o=l.length;e.hasClass(d)||(H.push(s+"-mfs_"+o),p.push(t),e.addClass(d)),o&&$(l).each(function(t,n){var e=$(n),l=!e.hasClass(c)&&e.attr("data-log-content")||"",h=e.attr(w)||"";!e.hasClass(d)&&a(e)&&(l&&i[6]?(b.push(l+"-"+i[6]+"-idx_"+t+"-mfs_"+o),x.push(t),h&&L.push(h),e.addClass(d)):(A.push(s+"-idx_"+t+"-mfs_"+o),C.push(t),e.addClass(d)))})}}),$("."+o).each(function(t,n){if(a($(n))||$(n).hasClass(u)){var e=$(n).find("."+g);$(n).removeClass(u),e.length?$(e).each(function(t,e){var s=$(e);if(a(s)||s.hasClass(u)){if(s.removeClass(u),v&&v!==$(n).data("eventid"))return $(n).addClass(u),void s.addClass(u);s.hasClass(c)?k(s):(null!==s.attr(m)&&""!==s.attr(m)&&void 0!==s.attr(m)&&T.push(s.attr(m)),s.attr(f)&&y.push(s.attr(f)),s.attr(w)&&L.push(s.attr(w))),v=$(n).data("eventid"),s.removeClass(c).removeClass(g).removeAttr(f).removeAttr(w).removeAttr(m)}}):$(n).removeClass(o)}}),(y.length||H.length||A.length||b.length||_)&&!l&&i()},z=function(){$(window).scroll(q),$(window).trigger("scroll")};z(),n.log=q});;fml.define("page/welcome",["component/banner","component/lazyloadPic","component/shareTmp","component/dialog","component/waterfall","component/mce","component/iStorage"],function(t,n,o){function e(){var t="http://s.meilishuo.com/1172jnw8/list/index?categoryId=20160580",n="http://s2.mogucdn.com/mlcdn/c45406/170329_407g0k6lce0b3h78ddjg9dd39eh33_2400x800.jpg",o="美丽优选T裇",e=v.find("li").length;e>1?v.imageSlide({evt:1,effect:1,autoTime:3e3}):e||v.find(".banner").append('<li class="data-ptp-item " data-ptp-customc="indexbanner_mls_ _'+o+'" ><a class="pic lazyload-placeholder no-cdn-compress" name="'+o+'" href="'+t+'" target="_blank" data-src="'+n+'"></a></li>')}function a(t){y.show(),y.find(".js-act-fix-left-banner").html('<a href="'+t[0].link+'" target="_blank"><img src="'+t[0].image+'" /></a>');var n=y.find(".act_left_box");n.css("top",w.height()-(n.height()+20)),y.find(".left_ad_close").on("click",function(){n.hide()})}function i(t){t=t.slice(0,6),$("#pop").show().find(".js-list").html(m("tmpl-pop",t))}function d(t){var n=u.getCookie(_);n||setTimeout(function(){var n=m("tmpl-promotion-ad",{promotion:t});f.meiliDialog({showHeader:!1,dialogContent:n,onClose:function(){u.setCookie(_,"show",{duration:j})}})},1e3)}function c(){function t(t){var o=a[t];if(n!==o&&(n&&(n.$link.removeClass(k),n.$content.hide()),n=o,n.$link.addClass(k),n.$content.show(),!o.isLoading)){if(o.isLoaded)return n&&n.$content.hide(),void o.$content.show();o.isLoading=!0,o.$content.addClass(d),$.ajax({url:i,dataType:"jsonp",data:{type:o.type,offset:0,limit:20}}).done(function(t){var n;n=t&&t.data&&t.data.rows?t.data.rows.slice(0,10):{empty:!0},o.isLoaded=!0,o.isLoading=!1,o.$content.removeClass(d).html(m("tmpl-top-goods",{list:n})),x.check();var a=o.$content.height();e.height()<a&&e.height(a)})}}var n,o=$("#top-goods"),e=o.find(".content-wrap"),a={today:{type:"mrsx",$link:o.find('[data-type="today"]'),$content:o.find(".js-top-goods-today")},week:{type:"yzrx",$link:o.find('[data-type="week"]'),$content:o.find(".js-top-goods-week")}},i="http://simba-api.meilishuo.com/mlselection/top/v1/topGoodsList/h5",d="loading";t("today"),o.find(".js-link").on("click",function(){t($(this).data("type"))})}function l(){var t="http://simba-api.meilishuo.com/venus/topic/v2/queryTopicList/pc";$.ajax({url:t,dataType:"jsonp"}).then(function(t){if(t&&t.data&&t.data.length){var n=$("#select"),o=t.data.slice(0,3);n.show().find(".js-content").addClass("item-num-"+o.length).html(m("tmpl-select",o))}})}function s(){g.get({id:"26489"}).then(function(t){t&&t.forEach(function(t){b>=1e3*t.stime&&b<=1e3*t.etime&&(C=t.pid)}),C&&(T.show(),p().start())})}function p(){var t=1,n={pid:C,page:t},o=h.init({el:".js-wall",tmpl:"tmpl-waterfall",url:"http://mce.meilishuo.com/jsonp/get/3",dataType:"jsonp",colNum:5,colGap:"20 20 0 0",hasSideGap:!0,isEqualHeight:!0,data:n,dataFilter:function(n){t+=1,this._config.data.page=t;var o="data.list".split(".");return o.forEach(function(t){n=n[t]}),n},onFetchSuccess:function(){o.getParam("rawData").data.isEnd&&(A.attr("status","stop").hide(),this.lock())},onFetchFinished:function(t,n){"success"==n&&r.load(".beauty_poster")}});return o}t("component/banner");var r=t("component/lazyloadPic"),m=t("component/shareTmp"),f=t("component/dialog"),h=t("component/waterfall"),g=t("component/mce"),u=t("component/iStorage"),w=$(window),v=$("#banner"),y=$("#global-act-left"),b=+$(".top-wrap").data("now"),k="active",j=345600,_="index-ad-last-showed-time",x=r.init({root:".top-wrap"});r.load("#banner"),r.load(".channels",{bgSize:"contain"});var C,T=$("#beauty"),A=T.find(".pullUp"),L=v.find("a");L.on("click",function(){var t=$(this),n={url:t.attr("href"),refer:document.referrer,index:L.index(t),bannerid:"",bannername:t.attr("name")};logger&&logger.log("000815001",n)}),e(),c(),l(),s(),g.get({id:{leftAd:"15477",pop:"39800",promotionAd:"15476"}}).then(function(t){t.leftAd&&t.leftAd.length&&a(t.leftAd),t.pop&&t.pop.length&&i(t.pop),t.promotionAd&&t.promotionAd.length&&d(t.promotionAd)})});;